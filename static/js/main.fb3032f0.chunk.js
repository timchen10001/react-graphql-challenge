(this["webpackJsonpreact-graphql-challenge"]=this["webpackJsonpreact-graphql-challenge"]||[]).push([[0],{66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var r,c,a,i,l,s,u,o,d,b,j,h=n(3),f=n.n(h),p=n(56),v=n.n(p),m=(n(66),n(18)),O=n(4),g=Object(h.createContext)({}),x=function(e){var t=e.initialState,n=e.reducer,r=e.children;return Object(O.jsx)(g.Provider,{value:Object(h.useReducer)(n,t),children:r})},T=function(){return Object(h.useContext)(g)},_=(n(68),function(){var e=T(),t=Object(m.a)(e,2)[1];return Object(h.useEffect)((function(){setTimeout((function(){var e,n=null===(e=document.querySelector(".header"))||void 0===e?void 0:e.classList;null===n||void 0===n||n.add("fadeout"),setTimeout((function(){null===n||void 0===n||n.add("hide"),t({type:"SET_SELECTED",selected:0})}),1500)}),1500)}),[]),Object(O.jsx)("div",{className:"header"})}),k=(n(69),function(e){if(!(null===e||void 0===e?void 0:e.includes("/")))return"";for(var t=e.split("/"),n="",r=t.length;r>0&&!(n=t[r--]););return n.replaceAll("-"," ")}),E=function(e){if("string"!==typeof e||!e.includes("/"))return"aVFPzTDCihQ";var t=e.split("/");return t[t.length-1]},S=n(9),y=n(61),w=function(e){var t=e.videoId,n=Object(y.a)(e,["videoId"]);return Object(O.jsx)("iframe",Object(S.a)(Object(S.a)({},n),{},{src:"https://www.youtube.com/embed/".concat(t),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))},L=function(e){var t,n,r,c,a,i,l=e.target,s=e.isMobile;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"title",children:null===l||void 0===l?void 0:l.mission_name}),Object(O.jsxs)("p",{className:"text",style:{padding:s?"0 5vw":"0"},children:[Object(O.jsx)("span",{className:"rocket",children:"Rocket\uff1a".concat(null===(t=l.rocket)||void 0===t?void 0:t.rocket_name)}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{className:"type",children:"Type\uff1a".concat(null===(n=l.rocket)||void 0===n?void 0:n.rocket_type)}),Object(O.jsx)("br",{}),Object(O.jsx)("span",{className:"date",children:"Date\uff1a".concat(l.launch_date_local)}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{className:"detail",children:["Details\uff1a",Object(O.jsx)("br",{}),l.details]}),Object(O.jsx)("br",{}),"string"!==typeof(null===(r=l.links)||void 0===r?void 0:r.article_link)?null:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("br",{}),Object(O.jsx)("a",{className:"article__link",href:l.links.article_link,children:k(null===(c=l.links)||void 0===c?void 0:c.article_link)})]})]}),(null===(a=l.links)||void 0===a?void 0:a.video_link)?Object(O.jsx)(w,{className:"embed__video",style:{width:s?"100%":"560px",minHeight:s?"350px":"380px",borderRadius:s?"0":"12px"},videoId:E(null===(i=l.links)||void 0===i?void 0:i.video_link),title:l.mission_name||""}):null]})},I=n(31),N=n.n(I),C=n(42),D=function(e,t){return Math.abs(e-t)},P=function(e){return new Promise((function(t){return setTimeout(t,e)}))},R=function(){var e=Object(h.useState)("mobile"),t=Object(m.a)(e,2),n=t[0],r=t[1],c=function(){window.innerWidth>768?r("PC"):window.innerWidth<=768&&window.innerWidth>576?r("tablet"):window.innerWidth<=576&&r("mobile")};return Object(h.useEffect)((function(){return window.addEventListener("resize",c),c(),function(){window.removeEventListener("resize",c)}}),[]),n},A=n(60),q=n(23),M=n(10),F={};!function(e){e.Ignore="ignore",e.Update="update"}(u||(u={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(o||(o={})),function(e){e.UsersPkey="users_pkey"}(d||(d={})),function(e){e.Id="id",e.Name="name",e.Rocket="rocket",e.Timestamp="timestamp",e.Twitter="twitter"}(b||(b={})),function(e){e.Id="id",e.Name="name",e.Rocket="rocket",e.Timestamp="timestamp",e.Twitter="twitter"}(j||(j={}));var H=Object(M.gql)(r||(r=Object(q.a)(["\n    fragment RegularLaunchSite on LaunchSite {\n  site_name_long\n}\n    "]))),G=Object(M.gql)(c||(c=Object(q.a)(["\n    fragment RegularLinks on LaunchLinks {\n  article_link\n  video_link\n}\n    "]))),W=Object(M.gql)(a||(a=Object(q.a)(["\n    fragment RegularRocket on LaunchRocket {\n  rocket_name\n  rocket_type\n}\n    "]))),Y=Object(M.gql)(i||(i=Object(q.a)(["\n    fragment RegularLaunch on Launch {\n  id\n  mission_name\n  launch_date_local\n  details\n  launch_success\n  launch_site {\n    ...RegularLaunchSite\n  }\n  links {\n    ...RegularLinks\n  }\n  rocket {\n    ...RegularRocket\n  }\n}\n    ","\n","\n",""])),H,G,W),z=Object(M.gql)(l||(l=Object(q.a)(["\n    query LaunchNext {\n  launchNext {\n    ...RegularLaunch\n  }\n}\n    ",""])),Y);var B=Object(M.gql)(s||(s=Object(q.a)(["\n    query LaunchesPast($limit: Int) {\n  launchesPast(limit: $limit) {\n    ...RegularLaunch\n  }\n}\n    ",""])),Y);var Q,J=function(){var e=T(),t=Object(m.a)(e,2),n=t[0].limit,r=t[1],c=function(e){var t=Object(S.a)(Object(S.a)({},F),e);return M.useQuery(z,t)}(),a=c.data,i=c.error,l=function(e){var t=Object(S.a)(Object(S.a)({},F),e);return M.useQuery(B,t)}({variables:{limit:n}}),s=l.data,u=l.error;if((null===s||void 0===s?void 0:s.launchesPast)&&Array.isArray(s.launchesPast)){var o=[].concat(Object(A.a)(s.launchesPast),[null===a||void 0===a?void 0:a.launchNext]);return r({type:"SET_LIMT",limit:o.length}),{data:o,error:u||i}}return{data:[null],error:u||i}},U=(n(77),function(){var e=function(){var e=T(),t=Object(m.a)(e,2),n=t[0],r=n.dispatching,c=n.limit,a=n.selected,i=t[1],l=function(){var e=document.querySelector(".wrapper"),t=.9*document.body.clientHeight,n=null===e||void 0===e?void 0:e.scrollTop,r=null===e||void 0===e?void 0:e.scrollHeight;return"number"===typeof n&&"number"===typeof r&&D(t+n,r)<1},s=function(){var e;return 0===(null===(e=document.querySelector(".wrapper"))||void 0===e?void 0:e.scrollTop)};function u(){return(u=Object(C.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t&&!r){e.next=2;break}return e.abrupt("return");case 2:if(n=a,!(t&&a<c)){e.next=9;break}if(l()){e.next=6;break}return e.abrupt("return");case 6:n++,e.next=13;break;case 9:if(t){e.next=13;break}if(s()){e.next=12;break}return e.abrupt("return");case 12:n=a?--n:c-1;case 13:return i({type:"SET_DISPATCHING",dispatching:!0}),i({type:"SET_SELECTED",selected:-1}),e.next=17,P(1e3);case 17:return i({type:"SET_SELECTED",selected:n%c}),e.next=20,P(2e3);case 20:i({type:"SET_DISPATCHING",dispatching:!1});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{handleOnWheel:function(){var e=Object(C.a)(N.a.mark((function e(t){var n,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r||D(t.deltaY,0)<40)){e.next=2;break}return e.abrupt("return");case 2:if(n=t.deltaY>0,u=a,!(n&&a<c)){e.next=10;break}if(l()){e.next=7;break}return e.abrupt("return");case 7:u++,e.next=14;break;case 10:if(n){e.next=14;break}if(s()){e.next=13;break}return e.abrupt("return");case 13:u=a?--u:c-1;case 14:return i({type:"SET_DISPATCHING",dispatching:!0}),i({type:"SET_SELECTED",selected:-1}),e.next=18,P(1e3);case 18:return i({type:"SET_SELECTED",selected:u%c}),e.next=21,P(2e3);case 21:i({type:"SET_DISPATCHING",dispatching:!1});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleTouchMove:function(e){return u.apply(this,arguments)}}}(),t=e.handleOnWheel,n=e.handleTouchMove,r=function(){var e=Object(h.useRef)(0),t=Object(h.useState)(null),n=Object(m.a)(t,2),r=n[0],c=n[1],a=T(),i=Object(m.a)(a,1)[0].selected,l=J(),s=l.data,u=l.error;return Object(h.useEffect)((function(){c(-1===i?null:null===s||void 0===s?void 0:s[i]),e.current++,console.log("TargetComponent has re-render ".concat(e.current," times ~"))}),[i]),{target:r,error:u}}(),c=r.target,a=r.error,i=R(),l="mobile"===i,s=0;return a?Object(O.jsx)("div",{children:a}):Object(O.jsxs)("div",{className:"home",onWheel:function(e){return t(e)},onTouchStart:function(e){"PC"!==i&&(s=e.changedTouches[0].clientY)},onTouchMove:function(e){if("PC"!==i){var t=e.changedTouches[0].clientY,r=t-s<0,c=D(t,s);n(c>30?r:void 0)}},children:[Object(O.jsx)(_,{}),c?Object(O.jsx)("div",{className:"item",children:Object(O.jsx)("ul",{className:"wrapper",children:Object(O.jsx)(L,{target:c,isMobile:l})})}):null]})}),$=(n(78),function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(U,{})})}),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},K=new M.ApolloClient({uri:"https://api.spacex.land/graphql",cache:new M.InMemoryCache});!function(e){e.SET_DISPATCHING="SET_DISPATCHING",e.SET_SELECTED="SET_SELECTED",e.SET_LIMIT="SET_LIMIT"}(Q||(Q={}));var X=function(e,t){switch(t.type){case Q.SET_DISPATCHING:return Object(S.a)(Object(S.a)({},e),{},{dispatching:t.dispatching});case Q.SET_SELECTED:return Object(S.a)(Object(S.a)({},e),{},{selected:t.selected});case Q.SET_LIMIT:return Object(S.a)(Object(S.a)({},e),{},{selected:t.limit});default:return e}};v.a.render(Object(O.jsx)(f.a.StrictMode,{children:Object(O.jsx)(M.ApolloProvider,{client:K,children:Object(O.jsx)(x,{initialState:{dispatching:!1,selected:-1,limit:10},reducer:X,children:Object(O.jsx)($,{})})})}),document.getElementById("root")),V()}},[[79,1,2]]]);
//# sourceMappingURL=main.fb3032f0.chunk.js.map